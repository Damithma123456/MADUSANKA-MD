const { updateEnv, readEnv } = require('../lib/database');
const EnvVar = require('../lib/mongodbenv');
const config = require('../config')
const {cmd , commands} = require('../command')
const os = require("os")
const yts = require('yt-search');
const {runtime} = require('../lib/functions')
const axios = require('axios');
const cheerio = require('cheerio');


cmd({
    pattern: "ringtone",
    alias: ["ringtones", "ring"],
    desc: "Get a random ringtone from the API.",
    react: "ğŸµ",
    category: "fun",
    filename: __filename,
},
async (conn, mek, m, { from, reply, args }) => {
    try {
        const query = args.join(" ");
        if (!query) {
            return reply("Please provide a search query! Example: .ringtone Suna");
        }

        const { data } = await axios.get(`https://www.dark-yasiya-api.site/download/ringtone?text=${encodeURIComponent(query)}`);

        if (!data.status || !data.result || data.result.length === 0) {
            return reply("No ringtones found for your query. Please try a different keyword.");
        }

        const randomRingtone = data.result[Math.floor(Math.random() * data.result.length)];

        await conn.sendMessage(
            from,
            {
                audio: { url: randomRingtone.dl_link },
                mimetype: "audio/mpeg",
                fileName: `${randomRingtone.title}.mp3`,
            },
            { quoted: m }
        );
    } catch (error) {
        console.error("Error in ringtone command:", error);
        reply("Sorry, something went wrong while fetching the ringtone. Please try again later.");
    }
});

cmd({
    pattern: "thenuxai",
    alias: ["aiimg", "generateimg", "aiimage"],
    desc: "Generate AI Images using Stable Diffusion",
    category: "ai",
    react: "ğŸ¤–",
    filename: __filename
},
async (conn, mek, m, { from, q, reply }) => {
    try {
        // Check if prompt is provided
        if (!q) return reply(`
*ğŸ¤– MALAKA-MD IMG AI ğŸ–¼ï¸*

Usage: .thenuxai <image description>
Example: .thenuxai Beautiful landscape with mountains

*Tips:*
- Be specific in your description
- Use descriptive words
- Mention style, color, mood
`);

        // React to show processing
        await m.react("ğŸ”„");

        // Construct API URL with the prompt
        const apiUrl = `https://api.davidcyriltech.my.id/diffusion?prompt=${encodeURIComponent(q)}`;

        // Fetch the image from the API
        const response = await axios({
            method: 'get',
            url: apiUrl,
            responseType: 'arraybuffer',
            timeout: 60000 // 60 seconds timeout
        });

        // Check if response is valid
        if (!response.data) {
            return reply("âŒ Failed to generate image. No data received.");
        }

        // Send the generated image
        await conn.sendMessage(from, {
            image: response.data,
            caption: `*ğŸ¤– MALAKA-MD IMG AI ğŸ–¼ï¸*

*ğŸ“ Prompt:* ${q}

*Generated by ThenuxAI*
*Model:* Stable Diffusion
`,
            quoted: mek
        });

        // React to successful image generation
        await m.react("âœ…");

    } catch (error) {
        console.error("ThenuxAI Image Generation Error:", error);
        
        // React to error
        await m.react("âŒ");

        // Detailed error handling
        if (error.response) {
            // The request was made and the server responded with a status code
            console.log(error.response.data);
            console.log(error.response.status);
            console.log(error.response.headers);

            if (error.response.status === 429) {
                return reply("â³ Too many requests. Please try again later.");
            } else if (error.response.status === 500) {
                return reply("ğŸš« Server error. Unable to generate image.");
            } else {
                return reply(`âŒ Error: ${error.response.status} - ${error.response.statusText}`);
            }
        } else if (error.request) {
            // The request was made but no response was received
            console.log(error.request);
            return reply("ğŸŒ No response received from the server. Check your internet connection.");
        } else {
            // Something happened in setting up the request that triggered an Error
            console.log('Error', error.message);
            return reply(`âŒ An unexpected error occurred: ${error.message}`);
        }
    }
});


//=====================================

cmd({
  pattern: "menu",
  desc: "Commands panel",
  react: 'ğŸ“œ',
  filename: __filename
}, async (bot, message, args, options) => {
  const { from, quoted, reply, pushname } = options;

  try {
    // Menu Text
    const menuText = `
â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â—â—â–º
â”‚ *Creator* : âš™ï¸ğ— ğ—”ğ——ğ—¨ğ—¦ğ—”ğ—¡ğ—ğ—”  ğ— ğ——ğŸª„
â”‚ *Version* : v0.1
â”‚ *Uptime*  : 17 seconds
â”‚ *RAM Usage* : 50.22MB
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â—â—â–º
â”‚ğŸª€ *LIST MENU*
â”‚   â”€â”€â”€â”€â”€â”€â”€
â”‚ _1_ *ğŸ“á´…á´á´¡É´ÊŸá´á´€á´… menu*
â”‚ _2_ *ğŸ“á´á´¡É´á´‡Ê€ menu*
â”‚ _3_ *ğŸ“É¢Ê€á´á´œá´˜ á´á´‡É´á´œ*
â”‚ _4_ *ğŸ“á´„á´É´á´ á´‡Ê€á´› menu*
â”‚ _5_ *ğŸ“êœ±á´‡á´€Ê€á´„Êœ menu*
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â—â—â–º
*ğŸ™ŠğŸ–¤ Reply the Number you want to select*

> ğŸ§Ÿâ€â™€ï¸á´˜á´á´¡á´‡Ê€á´… Ê™Ê á´á´€ÊŸá´€á´‹á´€ á´á´… / êœ±á´œÊ€á´€á´›Êœ á´á´…ğŸƒ`;

    // Send Menu Message
    const sentMenuMessage = await bot.sendMessage(from, {
      text: menuText,
      contextInfo: {
        mentionedJid: [''],
        groupMentions: [],
        forwardingScore: 1,
        isForwarded: true,
        forwardedNewsletterMessageInfo: {
          newsletterJid: '120363382823666763@newsletter',
          newsletterName: "á´á´€á´…á´œêœ±á´€É´á´‹á´€ á´á´…",
          serverMessageId: 999
        },
        externalAdReply: { 
          title: 'á´á´€á´…á´œêœ±á´€É´á´‹á´€ á´á´…',
          body: `${pushname}`,
          mediaType: 1,
          sourceUrl: "https://github.com/Malaka-KG/MALAKA-MD-V1",
          thumbnailUrl: "https://i.ibb.co/RkrM4XdG/941.jpg",
          renderLargerThumbnail: true,
          showAdAttribution: true
        }
      }
    }, { quoted: message });

    const menuMessageId = sentMenuMessage.key.id;

    const menuResponses = {
'1': { imageCaption:
`â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
> á´…á´á´¡É´ÊŸá´á´€á´… á´á´‡É´á´œ ğŸ‘©â€ğŸ’»
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
*â–º  .êœ±á´É´É¢*
> (Êá´á´œá´›á´œÊ™á´‡ êœ±á´É´É¢ á´…á´á´¡É´ÊŸá´á´€á´…)

*â–º  .á´ Éªá´…á´‡á´*
> (Êá´á´œá´›á´œÊ™á´‡ á´ Éªá´…á´‡á´ á´…á´á´¡É´ÊŸá´á´€á´…)

*â–º  .êœ°Ê™*
> (êœ°Ê™ á´ Éªá´…á´‡á´ á´…á´á´¡É´ÊŸá´á´€á´…)

*â–º  .á´›Éªá´‹á´›á´á´‹*
> (á´›Éªá´‹á´›á´á´‹ á´ Éªá´…á´‡á´ á´…á´á´¡É´ÊŸá´á´€á´…)
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†

> ğŸ§Ÿâ€â™€ï¸á´˜á´á´¡á´‡Ê€á´… Ê™Ê á´á´€ÊŸá´€á´‹á´€ á´á´… / êœ±á´œÊ€á´€á´›Êœ á´á´…ğŸƒ` },

      '2': { imageCaption: 
`â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
> á´á´¡É´á´‡Ê€ á´á´‡É´á´œ ğŸ‘¨â€ğŸ’»
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
*â–º  .êœ±á´‡á´›á´›ÉªÉ´É¢êœ±*
> (Ê™á´á´› êœ±á´‡á´›á´›ÉªÉ´É¢êœ± á´„Êœá´€É´É¢Ê€)

*â–º  .Ê™á´á´á´*
> (Ê™á´á´á´ á´êœ±É¢ êœ±á´‡É´á´…)

*â–º  .Ê€á´‡êœ±á´›á´€Ê€á´›á´‡*
> (Ê™á´á´› Ê€á´‡êœ±á´›á´€Ê€á´›á´‡)

*â–º  .Ê™ÊŸá´á´„ÊŸ*
> (Ê™ÊŸá´á´„á´‹ á´„Êœá´€á´›)

*â–º  .á´œÉ´Ê™ÊŸá´á´„á´‹*
> (á´œÉ´Ê™ÊŸá´á´„á´‹ á´„Êœá´€á´›)

*â–º  .á´„ÊŸá´‡á´€Ê€á´„Êœá´€á´›êœ±*
> (á´„Êœá´€á´› á´„ÊŸá´‡á´€Ê€)

*â–º  .á´ŠÉªá´…*
> (á´„Êœá´€á´› á´ŠÉªá´…)

*â–º  .É¢á´ŠÉªá´…*
> (É¢Ê€á´á´œá´˜ á´ŠÉªá´…êœ±)

*â–º  .êœ°á´œÊŸá´˜á´˜*
> (êœ±á´‡á´› á´˜Ê€á´êœ°ÉªÊŸá´‡ á´˜Êœá´á´›á´)

*â–º  .ÊŸá´‡á´€á´ á´‡*
> (É¢Ê€á´á´œá´˜ ÊŸá´‡á´€á´ á´‡)

*â–º  .á´á´¡É´á´‡Ê€*
> (É¢Ê€á´á´œá´˜ á´á´¡É´á´‡Ê€)

â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†

> ğŸ§Ÿâ€â™€ï¸á´˜á´á´¡á´‡Ê€á´… Ê™Ê á´á´€ÊŸá´€á´‹á´€ á´á´… / êœ±á´œÊ€á´€á´›Êœ á´á´…ğŸƒ` },

      '3': { imageCaption: 
`â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
> É¢Ê€á´á´œá´˜ á´á´‡É´á´œ ğŸ‘¥
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
*â–º  .á´€á´…á´…*
> (É¢Ê€á´á´œá´˜ á´á´€á´á´Ê™á´œêœ± á´€á´…á´…)

*â–º  .ÉªÉ´á´ Éªá´›á´‡*
> (ÉªÉ´á´ Éªá´›á´‡ á´›á´ É¢Ê€á´á´œá´˜)

*â–º  .á´‹Éªá´„á´‹*
> (É¢Ê€á´á´œá´˜ á´á´€á´Ê™á´œêœ±á´‡ á´‹Éªá´„á´‹)

*â–º  .á´€á´˜á´˜Ê€á´á´ á´‡*
> (É¢Ê€á´á´œá´˜ á´á´€á´Ê™á´œêœ±á´‡ á´€á´˜á´˜Ê€á´á´ á´‡)

*â–º  .Ê€á´‡á´Šá´‡á´„á´›*
> (É¢Ê€á´á´œá´˜ á´€á´˜á´˜Ê€á´á´ á´‡ Ê€á´‡á´Šá´‡á´„á´›)

*â–º  .á´˜Ê€á´á´á´á´›á´‡*
> (É¢Ê€á´á´œá´˜ á´€á´…á´ÉªÉ´ êœ±á´‡á´›)

*â–º  .á´…á´‡á´á´á´›á´‡*
> (É¢Ê€á´á´œá´˜ á´€á´…á´ÉªÉ´ Ê€á´‡á´á´á´ á´‡)

*â–º  .á´á´œá´›á´‡*
> (É¢Ê€á´á´œá´˜ á´€á´…á´ÉªÉ´ á´É´ÊŸÉª êœ±á´‡á´›)

*â–º  .á´…á´‡ÊŸ*
> (É¢Ê€á´á´œá´˜ á´êœ±É¢ á´…á´‡ÊŸ)

*â–º  .á´œÉ´á´á´œá´›á´‡*
> (É¢Ê€á´á´œá´˜ á´„Êœá´€á´› á´á´˜á´‡É´)

*â–º  .á´›á´€É¢á´€á´…á´ÉªÉ´*
> (É¢Ê€á´á´œá´˜ á´€á´…á´ÉªÉ´ á´›á´€É¢.)

*â–º  .á´›á´€É¢á´€ÊŸÊŸ*
> (É¢Ê€á´á´œá´˜ á´€ÊŸÊŸ á´›á´€É¢.)

*â–º  .Ê€á´‡Qá´œá´‡êœ±á´›êœ±*
> (É¢Ê€á´á´œá´˜ Ê€á´‡Qá´œá´‡êœ±á´›êœ±.)

*â–º  .á´‡É´á´…*
> (É¢Ê€á´á´œá´˜ á´‡É´á´….)

*â–º  .á´á´˜á´‡É´á´›Éªá´á´‡*
> (É¢Ê€á´á´œá´˜ á´á´˜á´‡É´á´›Éªá´á´‡.)

*â–º  .á´„ÊŸá´êœ±á´‡á´›Éªá´á´‡*
> (É¢Ê€á´á´œá´˜ á´„ÊŸá´êœ±á´‡á´›Éªá´á´‡.)

*â–º  .á´›á´€É¢á´€á´…á´ÉªÉ´*
> (É¢Ê€á´á´œá´˜ á´›á´€É¢á´€á´…á´ÉªÉ´.)

*â–º  .êœ±á´‡á´›É´á´€á´á´‡*
> (êœ±á´‡á´› É¢Ê€á´á´œá´˜ É´á´€á´á´‡)

*â–º  .êœ±á´‡á´›á´…á´‡êœ±á´„*
> (êœ±á´‡á´› É¢Ê€á´á´œá´˜ á´…á´‡êœ±á´„Ê€Éªá´˜á´›Éªá´É´)

*â–º  .ÉªÉ´á´ Éªá´›á´‡*
> (É¢Ê€á´á´œá´˜ ÉªÉ´á´ Éªá´›á´‡ ÊŸÉªÉ´á´‹.)

*â–º  .ÊœÉªá´…á´‡á´›á´€É¢*
> (É¢Ê€á´á´œá´˜ á´€ÊŸÊŸ á´›á´€É¢ á´›á´ á´êœ±É¢.)

â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†

> ğŸ§Ÿâ€â™€ï¸á´˜á´á´¡á´‡Ê€á´… Ê™Ê á´á´€ÊŸá´€á´‹á´€ á´á´… / êœ±á´œÊ€á´€á´›Êœ á´á´…ğŸƒ` },

      '4': { imageCaption: 
`â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
> á´„á´É´á´ á´‡Ê€á´› á´á´‡É´á´œ ğŸŒ€
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
*â–º .êœ±á´›Éªá´„á´‹á´‡Ê€*
> (Éªá´É¢ á´›á´ á´„á´É´á´ á´‡Ê€á´› êœ±á´›Éªá´„á´‹á´‡Ê€)

*â–º  .á´€á´›á´›á´˜*
> (á´€á´›á´›á´˜ êœ±á´›Éªá´„á´‹á´‡Ê€)

*â–º  .á´›á´Éªá´É¢*
> (á´›á´Éªá´É¢ êœ±á´›Éªá´„á´‹á´‡Ê€)

*â–º  .á´›á´á´˜á´›á´›*
> (á´›á´á´˜á´›á´› á´ Éªá´…á´‡á´)

*â–º  .á´›Ê€á´›*
> (ÊŸá´€É´É¢á´œá´€É¢á´‡ á´›Ê€á´€É´êœ±ÊŸá´€á´›á´‡Ê€)

*â–º  .á´ á´ *
> (á´ á´  á´á´‡É´á´œ)

*â–º  .pair*
> (pair 9470******)

*â–º  .qr*
> (qr 9470******)

â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†

> ğŸ§Ÿâ€â™€ï¸á´˜á´á´¡á´‡Ê€á´… Ê™Ê á´á´€ÊŸá´€á´‹á´€ á´á´… / êœ±á´œÊ€á´€á´›Êœ á´á´…ğŸƒ` },

      '5': { imageCaption: 
`â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
> á´€Éª á´á´‡É´á´œ ğŸŒ€
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
*â–º  .á´€Éª*
> (á´€Éª á´á´‡É´á´œ)
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†

â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
*â–º  .É¢á´˜á´›*
> (É¢á´˜á´› á´á´‡É´á´œ)
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†

â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
*â–º  .á´Éªêœ±á´›Ê€á´€á´€Éª*
> (á´Éªêœ±á´›Ê€á´€á´€Éª á´á´‡É´á´œ)
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†

â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
*â–º  .É¢á´˜á´›2*
> (É¢á´˜á´›2 á´á´‡É´á´œ)
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†

â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
*â–º  .ÊŸÊŸá´€á´á´€3*
> (ÊŸÊŸá´€á´á´€3 á´á´‡É´á´œ)
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†

â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
*â–º  .á´á´‡á´›á´€Éª*
> (á´á´‡á´›á´€Éª á´á´‡É´á´œ)
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†

â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
*â–º  .É¢á´˜á´›4á´*
> (É¢á´˜á´›4á´ á´á´‡É´á´œ)
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†

â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
*â–º  .toolbot*
> (*toolbot* á´á´‡É´á´œ)
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†

> ğŸ§Ÿâ€â™€ï¸á´˜á´á´¡á´‡Ê€á´… Ê™Ê á´á´€ÊŸá´€á´‹á´€ á´á´… / êœ±á´œÊ€á´€á´›Êœ á´á´…ğŸƒ` },

      '6': { imageCaption: 
`â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
> á´á´á´ Éªá´‡ >êœ±ÉªÉ´Êœá´€ÊŸá´€êœ±á´œÊ™ ğŸ¬
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
*â–º  .êœ±ÉªÉ´Êœá´€ÊŸá´€êœ±á´œÊ™ >á´á´á´ Éªá´‡ á´á´‡É´á´œ*
> (êœ±ÉªÉ´Êœá´€ÊŸá´€êœ±á´œÊ™ á´á´á´ Éªá´‡)

*â–º  .É¢ÉªÉ´Éªêœ±Éªêœ±ÉªÊŸá´€ >á´„á´€Ê€á´›á´á´É´ á´á´‡É´á´œ*
> (É¢ÉªÉ´Éªêœ±Éªêœ±ÉªÊŸá´€ á´á´á´ Éªá´‡)

*â–º  .á´á´á´ Éªá´‡2 >êœ±á´‡á´€Ê€á´„Êœ á´á´‡É´á´œ*
> (á´á´á´ Éªá´‡2 êœ±á´‡á´€Ê€á´„Êœ)


â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†

> ğŸ§Ÿâ€â™€ï¸á´˜á´á´¡á´‡Ê€á´… Ê™Ê á´á´€ÊŸá´€á´‹á´€ á´á´… / êœ±á´œÊ€á´€á´›Êœ á´á´…ğŸƒ` },

      '7': { imageCaption: 
`â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
> êœ±á´‡á´€Ê€á´„Êœ á´á´‡É´á´œ ğŸ”
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
*â–º .ytsearch*
> (Êá´á´œá´›á´œÊ™á´‡ êœ±á´‡á´€Ê€á´„Êœ)
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†

â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
*â–º .tiktoksearch*
> (*tiktoksearch êœ±á´‡á´€Ê€á´„Êœ*)
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†

â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
*â–º .tiktokss*
> (*tiktokss êœ±á´‡á´€Ê€á´„Êœ*)
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†

> ğŸ§Ÿâ€â™€ï¸á´˜á´á´¡á´‡Ê€á´… Ê™Ê á´á´€ÊŸá´€á´‹á´€ á´á´… / êœ±á´œÊ€á´€á´›Êœ á´á´…ğŸƒ` },

      '8': { imageCaption: 
`â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
> É´á´‡á´¡êœ± á´á´‡É´á´œ ğŸ”
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
*â–º .hiru*
> (hiru É´á´‡á´¡êœ±)
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†

â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
*â–º .lankadeepa*
> (lankadeepa É´á´‡á´¡êœ±)
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†

â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
*â–º .sirasa*
> (sirasa É´á´‡á´¡êœ±)
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†

â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
*â–º .ada*
> (ada É´á´‡á´¡êœ±)
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†

â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
*â–º .bbc*
> (bbc É´á´‡á´¡êœ±)
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†

â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
*â–º .gagana*
> (gagana É´á´‡á´¡êœ±)
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†

â•­â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†
*â–º .É´á´‡á´¡êœ±*
> (É´á´‡á´¡êœ± É´á´‡á´¡êœ±)
â•°â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš†

> ğŸ§Ÿâ€â™€ï¸á´˜á´á´¡á´‡Ê€á´… Ê™Ê á´á´€ÊŸá´€á´‹á´€ á´á´… / êœ±á´œÊ€á´€á´›Êœ á´á´…ğŸƒ` },
    };

    // Listen for replies to the menu message
    bot.ev.on("messages.upsert", async event => {
      const newMessage = event.messages[0];
      if (!newMessage.message) return;

      const userReply = newMessage.message.conversation || newMessage.message.extendedTextMessage?.text;
      const isReplyToMenu = newMessage.message.extendedTextMessage?.contextInfo?.stanzaId === menuMessageId;

      if (isReplyToMenu) {
        const response = menuResponses[userReply];
        if (response) {
          // Send image response
          await bot.sendMessage(from, {
            text: response.imageCaption,
            contextInfo: {
              mentionedJid: [''],
              groupMentions: [],
              forwardingScore: 1,
              isForwarded: true,
              forwardedNewsletterMessageInfo: {
                newsletterJid: '120363382823666763@newsletter',
                newsletterName: "á´á´€á´…á´œêœ±á´€É´á´‹á´€ á´á´…",
                serverMessageId: 1
              },
              externalAdReply: {
                title: 'á´á´€á´…á´œêœ±á´€É´á´‹á´€ á´á´…',
                body: `${pushname}`,
                mediaType: 1,
                sourceUrl: "https://github.com/Malaka-KG/MALAKA-MD-V1",
                thumbnailUrl: "https://i.ibb.co/RkrM4XdG/941.jpg",
                renderLargerThumbnail: true,
                showAdAttribution: true
              }
            }
          }, { quoted: newMessage });
        } else {
          // Handle invalid input
          await bot.sendMessage(from, {
            text: "Invalid option! Please reply with a valid number."
          }, { quoted: newMessage });
        }
      }
    });
  } catch (error) {
    console.error(error);
    reply(`Error: ${error.message}`);
  }
});


cmd({
    pattern: "alive",
    alias: ["malaka-md", "MALAKA-MD", "uptime"],
    desc: "Check uptime and system status",
    category: "main",
    react: "ğŸ‘‹",
    filename: __filename
},
async (conn, mek, m, { from, quoted, body, isCmd, command, args, q, isGroup, sender, senderNumber, botNumber2, botNumber, pushname, isMe, isOwner, groupMetadata, groupName, participants, groupAdmins, isBotAdmins, isAdmins, reply }) => {
    try {
        // Generate system status message
        const status = `
â•­â”â”ã€” *âš™ï¸ğ— ğ—”ğ——ğ—¨ğ—¦ğ—”ğ—¡ğ—ğ—”  ğ— ğ——ğŸª„* ã€•â”â”â”ˆâŠ·
â”‚â–¸ *ğŸ‘‹ Hello dark nero I'm alive now*
â”‚ğŸ‡±ğŸ‡° I'm ğ—œ âš™ï¸ğ— ğ—”ğ——ğ—¨ğ—¦ğ—”ğ—¡ğ—ğ—”  ğ— ğ——ğŸª„ Whatsapp Botâœ“
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”ˆâŠ·
â”‚â–¸ â— á´ á´‡Ê€á´›Éªá´É´  : á´ 0.1 ğŸƒ
 |
â”‚â–¸ â— á´„á´á´á´á´€É´á´… : 100+ âœ…
â”‚â–¸ â— á´…á´‡á´ á´€ÊŸá´á´˜  : âš™ï¸ğ— ğ—”ğ——ğ—¨ğ—¦ğ—”ğ—¡ğ—ğ—”  ğ— ğ——ğŸª„
â”‚â–¸â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”ˆâŠ·
â”‚â–¸> *Ê™á´á´› É¢Éªá´›Êœá´œÊ™ ğŸ‘¨â€ğŸ’»*
https://github.com/madusanka-KG/MADUSANKA-MD-V1
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”ˆâŠ·
â”‚â–¸> *á´Šá´ÉªÉ´ á´¡Êœá´€á´›êœ±á´€á´˜á´˜ É¢Ê€á´á´œá´˜ ğŸ‘‡*
https://chat.whatsapp.com/H2zKVvtWUQh07i2SkDjfEj
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”ˆâŠ·
*â”‚* *Ê™á´á´› á´á´¡É´á´‡Ê€ ğŸ‘©â€ğŸ’»*
+94756331255
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”ˆâŠ·
*â”‚â”‚â–¸ âš™ï¸ğ— ğ—”ğ——ğ—¨ğ—¦ğ—”ğ—¡ğ—ğ—”  ğ— ğ——ğŸª„ WHATSAPP BOT*
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”ˆâŠ·
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”ˆâŠ·
> ğŸ§Ÿâ€â™€ï¸á´˜á´á´¡á´‡Ê€á´… Ê™Ê á´á´€ÊŸá´€á´‹á´€ á´á´… / êœ±á´œÊ€á´€á´›Êœ á´á´…ğŸƒ`;

        // Send the status message with an image
        await conn.sendMessage(from, { 
            image: { url: `https://i.ibb.co/RkrM4XdG/941.jpg` },  // Image URL
            caption: status,
            contextInfo: {
                mentionedJid: [m.sender],
                forwardingScore: 1,
                isForwarded: true,
                forwardedNewsletterMessageInfo: {
                    newsletterJid: '120363382823666763@newsletter',
                    newsletterName: 'á´á´€ÊŸá´€á´‹á´€-á´á´…',
                    serverMessageId: 143
                }
            }
        }, { quoted: mek });

    } catch (e) {
        console.error("Error in alive command:", e);
        reply(`An error occurred: ${e.message}`);
    }
});

cmd(
  {
    pattern: "restart",
    desc: "Restart the bot",
    category: "owner",
    react: "ğŸ’¢",
    filename: __filename,
  },
  async (
    conn,
    mek,
    m,
    {
      from,
      quoted,
      body,
      isCmd,
      command,
      args,
      q,
      isGroup,
      sender,
      senderNumber,
      botNumber2,
      botNumber,
      pushname,
      isMe,
      isOwner,
      groupMetadata,
      groupName,
      participants,
      groupAdmins,
      isBotAdmins,
      isAdmins,
      reply,
    }
  ) => {
    try {
      if (!isOwner) {
    return reply("âŒ You Are Not The Owner !");
  }
      const { exec } = require("child_process");
      reply("Restarting...");
      await new Promise((resolve) => setTimeout(resolve, 1500)); // Sleep function
      exec("pm2 restart all", (error, stdout, stderr) => {
        if (error) {
          console.error(`Error: ${error.message}`);
          reply(`Error: ${error.message}`);
          return;
        }
        if (stderr) {
          console.error(`Stderr: ${stderr}`);
          reply(`Stderr: ${stderr}`);
          return;
        }
        console.log(`Stdout: ${stdout}`);
        reply("Bot restarted successfully.");
      });
    } catch (e) {
      console.error(e);
      reply(`An error occurred: ${e.message}`);
    }
  }
);

cmd({
    pattern: "settings",
    alias: ["setting"],
    desc: "settings the bot",
    category: "owner",
    react: "âš™",
    filename: __filename


},
async (conn, mek, m, { from, isOwner, quoted, reply }) => {
    if (!isOwner) return reply("âŒ You are not the owner!");
    try {
        let desc = `
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€Â·Â·Â·â–¸
â”‚â–¸âš™ğ— ğ—”ğ——ğ—¨ğ—¦ğ—”ğ—¡ğ—ğ—” ğ— ğ—— SETTINGSâš™
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€Â·Â·Â·â–¸
â”‚â–¸ WORK MODE 
â”‚â–¸ â”£ 1.1  Public WorkğŸŒ
â”‚â–¸ â”£ 1.2  Private WorkğŸ‘¤
â”‚â–¸ â”£ 1.3  Group OnlyğŸ«‚
â”‚â–¸ â”— 1.4  Inbox OnlyğŸ‘¥
â”‚â–¸
â”‚â–¸ AUTO VOICE 
â”‚â–¸ â”£ 2.1  Auto Voice ON ğŸ“²
â”‚â–¸ â”— 2.2  Auto Voice OFF ğŸ“´
â”‚â–¸
â”‚â–¸ AUTO STATUS SEEN 
â”‚â–¸ â”£ 3.1  Auto Read Status ON ğŸ“²
â”‚â–¸ â”— 3.2  Auto Read Status OFF ğŸ“´
â”‚â–¸
â”‚â–¸ AUTO STICKER 
â”‚â–¸ â”£ 4.1  Auto sticker ON ğŸ“²
â”‚â–¸ â”— 4.2  Auto sticker OFF ğŸ“´
â”‚â–¸
â”‚â–¸ AUTO REPLY 
â”‚â–¸ â”£ 5.1  Auto reply ON ğŸ“²
â”‚â–¸ â”— 5.2  Auto reply OFF ğŸ“´
â”‚â–¸
â”‚â–¸ AUTO_REACT 
â”‚â–¸ â”£ 6.1  Auto react ON ğŸ“²
â”‚â–¸ â”— 6.2  Auto react OFF ğŸ“´
â”‚â–¸
â”‚â–¸ HEART_REACT 
â”‚â–¸ â”£ 7.1  heart react ON ğŸ“²
â”‚â–¸ â”— 7.2  heart react OFF ğŸ“´
â”‚â–¸
â”‚â–¸ OWNER_REACT 
â”‚â–¸ â”£ 8.1  owner react ON ğŸ“²
â”‚â–¸ â”— 8.2  owner react OFF ğŸ“´
â”‚â–¸
â”‚â–¸ WELCOME_SET 
â”‚â–¸ â”£ 9.1  welcome set ON ğŸ“²
â”‚â–¸ â”— 9.2  welcome set OFF ğŸ“´
â”‚â–¸
â”‚â–¸ WELCOME_ALERT 
â”‚â–¸ â”£ 10.1  welcome alert ON ğŸ“²
â”‚â–¸ â”— 10.2  welcome alert OFF ğŸ“´
â”‚â–¸
â”‚â–¸ WELCOME 
â”‚â–¸ â”£ 11.1  welcome ON ğŸ“²
â”‚â–¸ â”— 11.2  welcome OFF ğŸ“´
â”‚â–¸
â”‚â–¸ ALLOWS_ONLINE 
â”‚â–¸ â”£ 12.1  allows online ON ğŸ“²
â”‚â–¸ â”— 12.2  allows online OFF ğŸ“´
â”‚â–¸
â”‚â–¸ ANTI_LINK 
â”‚â–¸ â”£ 13.1  anti link ON ğŸ“²
â”‚â–¸ â”— 13.2  anti link OFF ğŸ“´
â”‚â–¸
â”‚â–¸ ANTI_BAD 
â”‚â–¸ â”£ 14.1  anti bad ON ğŸ“²
â”‚â–¸ â”— 14.2  anti bad OFF ğŸ“´
â”‚â–¸
â”‚â–¸ READ_MESSAGE 
â”‚â–¸ â”£ 15.1  read message ON ğŸ“²
â”‚â–¸ â”— 15.2  read message OFF ğŸ“´
â”‚â–¸
â”‚â–¸ ALLWAYS_OFFLINE 
â”‚â–¸ â”£ 16.1  allways offline ON ğŸ“²
â”‚â–¸ â”— 16.2  allways offline OFF ğŸ“´
â”‚â–¸
â”‚â–¸ AUTO_TYPING 
â”‚â–¸ â”£ 18.1  auto typing ON ğŸ“²
â”‚â–¸ â”— 18.2  auto typing OFF ğŸ“´
â”‚â–¸
â”‚â–¸ AUTO_BLOCK 
â”‚â–¸ â”£ 20.1  auto block ON ğŸ“²
â”‚â–¸ â”— 20.2  auto block OFF ğŸ“´
â”‚â–¸
â”‚â–¸ ANTI_BOT 
â”‚â–¸ â”£ 21.1  anti bot ON ğŸ“²
â”‚â–¸ â”— 21.2  anti bot OFF ğŸ“´
â”‚â–¸
â”‚â–¸ AUTO_REACT_STATUS 
â”‚â–¸ â”£ 22.1  react_status ON ğŸ“²
â”‚â–¸ â”— 22.2  react_status OFF ğŸ“´
â”‚â–¸
â”‚â–¸ FAKE_RECORDING 
â”‚â–¸ â”£ 24.1  fake recorbing ON ğŸ“²
â”‚â–¸ â”— 24.2  fake recorbing OFF ğŸ“´
â”‚â–¸
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€Â·Â·Â·â–¸
> ğŸ§Ÿâ€â™€ï¸á´˜á´á´¡á´‡Ê€á´… Ê™Ê á´á´€ÊŸá´€á´‹á´€ á´á´… / êœ±á´œÊ€á´€á´›Êœ á´á´…ğŸƒ`;

        const vv = await conn.sendMessage(from, { image: { url: "https://i.ibb.co/RkrM4XdG/941.jpg"}, caption: desc }, { quoted: mek });

        conn.ev.on('messages.upsert', async (msgUpdate) => {
            const msg = msgUpdate.messages[0];
            if (!msg.message || !msg.message.extendedTextMessage) return;

            const selectedOption = msg.message.extendedTextMessage.text.trim();

            if (msg.message.extendedTextMessage.contextInfo && msg.message.extendedTextMessage.contextInfo.stanzaId === vv.key.id) {
                switch (selectedOption) {
                    case '1.1':
                        reply(".update MODE:public" );
                        reply(".restart");
                        break;
                    case '1.2':               
                        reply(".update MODE:private");
                        reply(".restart");
                        break;
                    case '1.3':               
                          reply(".update MODE:group");
                        reply(".restart");
                      break;
                    case '1.4':     
                        reply(".update MODE:inbox");
                        reply(".restart");
                      break;
                    case '2.1':     
                        reply(".update AUTO_VOICE:true");
                        reply(".restart");
                        break;
                    case '2.2':     
                        reply(".update AUTO_VOICE:false");
                        reply(".restart");
                    break;
                    case '3.1':    
                        reply(".update AUTO_READ_STATUS:true");
                        reply(".restart");
                    break;
                    case '3.2':    
                        reply(".update AUTO_READ_STATUS:false");
                        reply(".restart");
                    break;                    
                    case '4.1':    
                        reply(".update AUTO_STICKER:true");
                        reply(".restart");
                    break;
                    case '4.2':    
                        reply(".update AUTO_STICKER:false");
                        reply(".restart");
                    break;                                        
                    case '5.1':    
                        reply(".update AUTO_REPLY:true");
                        reply(".restart");
                    break;
                    case '5.2':    
                        reply(".update AUTO_REPLY:false");
                        reply(".restart");
                    break;
                    case '6.1':    
                        reply(".update AUTO_REACT:true");
                        reply(".restart");
                    break;
                    case '6.2':    
                        reply(".update AUTO_REACT:false");
                        reply(".restart");
                    break;
                    case '7.1':    
                        reply(".update HEART_REACT:true");
                        reply(".restart");
                    break;
                    case '7.2':    
                        reply(".update HEART_REACT:false");
                        reply(".restart");
                    break;
                    case '8.1':    
                        reply(".update OWNER_REACT:true");
                        reply(".restart");
                    break;
                    case '8.2':    
                        reply(".update OWNER_REACT:false");
                        reply(".restart");
                    break;
                    case '9.1':    
                        reply(".update WELCOME_SET:true");
                        reply(".restart");
                    break;
                    case '9.2':    
                        reply(".update WELCOME_SET:false");
                        reply(".restart");
                    break;
                    case '10.1':    
                        reply(".update WELCOME_ALERT:true");
                        reply(".restart");
                    break;
                    case '10.2':    
                        reply(".update WELCOME_ALERT:false");
                        reply(".restart");
                    break;
                    case '11.1':    
                        reply(".update WELCOME:true");
                        reply(".restart");
                    break;
                    case '11.2':    
                        reply(".update WELCOME:false");
                        reply(".restart");
                    break;
                    case '12.1':    
                        reply(".update ALLOWS_ONLINE:true");
                        reply(".restart");
                    break;
                    case '12.2':    
                        reply(".update ALLOWS_ONLINE:false");
                        reply(".restart");
                    break;
                    case '13.1':    
                        reply(".update ANTI_LINK:true");
                        reply(".restart");
                    break;
                    case '13.2':    
                        reply(".update ANTI_LINK:false");
                        reply(".restart");
                    break;
                    case '14.1':    
                        reply(".update ANTI_BAD:true");
                        reply(".restart");
                    break;
                    case '14.2':    
                        reply(".update ANTI_BAD:false");
                        reply(".restart");
                    break;
                    case '15.1':    
                        reply(".update READ_MESSAGE:true");
                        reply(".restart");
                    break;
                    case '15.2':    
                        reply(".update READ_MESSAGE:false");
                        reply(".restart");
                    break;
                    case '16.1':    
                        reply(".update ALLWAYS_OFFLINE:true");
                        reply(".restart");
                    break;
                    case '16.2':    
                        reply(".update ALLWAYS_OFFLINE:false");
                        reply(".restart");
                    break;
                    case '17.1':    
                        reply(".update ANTI_DELETE:true");
                        reply(".restart");
                    break;
                    case '17.2':    
                        reply(".update ANTI_DELETE:false");
                        reply(".restart");
                    break;
                    case '18.1':    
                        reply(".update AUTO_TYPING:true");
                        reply(".restart");
                    break;
                    case '18.2':    
                        reply(".update AUTO_TYPING:false");
                        reply(".restart");
                    break;
                    case '19.1':    
                        reply(".update AI_CHAT:true");
                        reply(".restart");
                    break;
                    case '19.2':    
                        reply(".update AI_CHAT:false");
                        reply(".restart");
                    break;
                    case '20.1':    
                        reply(".update AUTO_BLOCK:true");
                        reply(".restart");
                    break;
                    case '20.2':    
                        reply(".update AUTO_BLOCK:false");
                        reply(".restart");
                    break;
                    case '21.1':    
                        reply(".update ANTI_BOT:true");
                        reply(".restart");
                    break;
                    case '21.2':    
                        reply(".update ANTI_BOT:false");
                        reply(".restart");
                    break;
                    case '22.1':    
                        reply(".update AUTO_REACT_STATUS:true");
                        reply(".restart");
                    break;
                    case '22.2':    
                        reply(".update AUTO_REACT_STATUS:false");
                        reply(".restart");
                    break;
                    case '23.1':    
                        reply(".update ANTI_CALL:true");
                        reply(".restart");
                    break;
                    case '23.2':    
                        reply(".update ANTI_CALL:false");
                        reply(".restart");
                    break;
                    case '24.1':    
                        reply(".update FAKE_RECORDING:true");
                        reply(".restart");
                    break;
                    case '24.2':    
                        reply(".update FAKE_RECORDING:false");
                        reply(".restart");
                    break;

            
                    default:
                        reply("Invalid option. Please select a valid optionğŸ”´");
                }

            }
        });

    } catch (e) {
        console.error(e);
        await conn.sendMessage(from, { react: { text: 'âŒ', key: mek.key } })
        reply('An error occurred while processing your request.');
    }
});


cmd({
    pattern: "update",
    alias: ["undefined"],
    desc: "Check and update environment variables",
    react: "âš™",
    category: "owner",
    filename: __filename,
},
async (conn, mek, m, { from, q, reply, isOwner }) => {
    
    if (!isOwner) return reply("âŒ You are not the owner!");

    if (!q) {
        return reply("ğŸ™‡â€â™‚ï¸ *Please provide the environment variable and its new value.* \n\nExample: `.update ALIVE_MSG: hello i am prabath kumara`");
    }

    // Find the position of the first colon or comma
    const colonIndex = q.indexOf(':');
    const commaIndex = q.indexOf(',');

    // Ensure we have a valid delimiter index
    const delimiterIndex = colonIndex !== -1 ? colonIndex : commaIndex;
    if (delimiterIndex === -1) {
        return reply("ğŸ«  *Invalid format. Please use the format:* `.update KEY:VALUE`");
    }

    // Extract key and value
    const key = q.substring(0, delimiterIndex).trim();
    const value = q.substring(delimiterIndex + 1).trim();
    
    // Extract mode if provided
    const parts = value.split(/\s+/).filter(part => part.trim());
    const newValue = value; // Use the full value as provided by the user
    const mode = parts.length > 1 ? parts.slice(1).join(' ').trim() : '';
    
    const validModes = ['public', 'private', 'groups', 'inbox'];
    const finalMode = validModes.includes(mode) ? mode : '';

    if (!key || !newValue) {
        return reply("ğŸ«  *Invalid format. Please use the format:* `.update KEY:VALUE`");
    }

    // Specific checks for MODE, ALIVE_IMG, and AUTO_READ_STATUS
    if (key === 'MODE' && !validModes.includes(newValue)) {
        return reply(`ğŸ˜’ *Invalid mode. Valid modes are: ${validModes.join(', ')}*`);
    }

    if (key === 'ALIVE_IMG' && !newValue.startsWith('https://')) {
        return reply("ğŸ˜“ *Invalid URL format. PLEASE GIVE ME IMAGE URL*");
    }

    if (key === 'AUTO_READ_STATUS' && !['true', 'false'].includes(newValue)) {
        return reply("ğŸ˜“ *Invalid value for AUTO_READ_STATUS. Please use `true` or `false`.*");
    }

    try {
        // Check if the environment variable exists
        const envVar = await EnvVar.findOne({ key: key });

        if (!envVar) {
            // If the variable does not exist, fetch and list all existing env vars
            const allEnvVars = await EnvVar.find({});
            const envList = allEnvVars.map(env => `${env.key}: ${env.value}`).join('\n');
            return reply(`âŒ *The environment variable ${key} does not exist.*\n\n*Here are the existing environment variables:*\n\n${envList}`);
        }

        // Update the environment variable
        await updateEnv(key, newValue, finalMode);
        reply(`âœ… *Environment variable updated.*\n\nğŸ—ƒï¸ *${key}* â  ${newValue} ${finalMode ? `\n*Mode:* ${finalMode}` : ''}`);
        
    } catch (err) {
        console.error('Error updating environment variable:' + err.message);
        reply("ğŸ™‡â€â™‚ï¸ *Failed to update the environment variable. Please try again.*" + err);
    }
});
